<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Viewer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body class="m-0 p-0 overflow-hidden font-sans antialiased">
    <div id="app" class="min-h-screen">
        <div v-if="currentView === 'menu'" class="min-h-screen flex items-center justify-center">
            <input type="file" accept="application/pdf" @change="handleFileChange">
        </div>
        <div v-if="currentView === 'pdf'" class="min-h-screen bg-gray-200">
            <button @click="revokeUrl(); currentView = 'menu'"
                class="fixed top-4 right-4 z-50 bg-white/80 backdrop-blur-sm hover:bg-white/90 text-gray-800 py-1 px-2 rounded-full shadow-lg hover:scale-110 transition-all flex items-center">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <iframe v-if="pdfUrl" :src="pdfUrl" class="fixed inset-0 w-full h-full border-0"></iframe>
        </div>
    </div>
    <script>
        const { createApp, ref, onUnmounted } = Vue;
        createApp({
            setup() {
                const currentView = ref('menu');
                const pdfUrl = ref(null);
                const revokeUrl = () => {
                    if (pdfUrl.value) {
                        URL.revokeObjectURL(pdfUrl.value);
                        pdfUrl.value = null;
                    }
                };
                const handleFileChange = e => {
                    const file = e.target.files[0];
                    if (!file) return;
                    revokeUrl();
                    pdfUrl.value = URL.createObjectURL(file);
                    currentView.value = 'pdf';
                    e.target.value = null;
                };
                onUnmounted(revokeUrl);
                return { currentView, pdfUrl, handleFileChange, revokeUrl };
            }
        }).mount('#app');
    </script>
</body>

</html>